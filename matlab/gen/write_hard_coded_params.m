load('params_config.mat')
model_parameters
model= split(pwd, '/');

fid= fopen('hard_coded_params.h', 'w');
fprintf(fid, '// hard coded parameters generated by script write_hard_coded_params\n');
fprintf(fid, '// for model %s\n', model{end-1});

for i= 1:length(parameter_names)
    parameter_name= parameter_names{i};
    p= p_.(parameter_name);
    if numel(p)>1
        for i_row= 1:size(p, 1)
            for i_col= 1:size(p, 2)
                fprintf(fid, '    model.param.%s(%d, %d)= %.16e;\n', parameter_name, i_row-1, i_col-1, p(i_row, i_col));
            end
        end
    else
        fprintf(fid, '    model.param.%s= %.16e;\n', parameter_name, p);
    end
end

fclose(fid);